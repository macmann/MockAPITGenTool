<%
  const routeData = route || { method: 'GET', path: '/', response: '{}' };
  const e = endpoint || routeData;
  const q = query || {};
  const keyParam = encodeURIComponent(q.key || '');
  const body = `
    <section>
      <h2>${title}</h2>
      ${e && e.id ? `
      <p>
        <a href="/admin/${e.id}?key=${keyParam}">Edit</a> ·
        <a href="/admin/${e.id}/vars?key=${keyParam}">Vars</a> ·
        <a href="/admin/${e.id}/logs?key=${keyParam}">Logs</a>
      </p>
      ` : ''}
      ${error ? `<article class="error">${error.message || error}</article>` : ''}
      <form id="route-form" method="post" action="/api/routes">
        <input type="hidden" name="id" value="${routeData.id || ''}" />
        <label>
          Method
          <input name="method" required value="${routeData.method}" />
        </label>
        <label>
          Path
          <input name="path" required value="${routeData.path}" />
        </label>
        <label>
          Description
          <input name="description" value="${routeData.description || ''}" />
        </label>
        <label>
          Response JSON
          <textarea name="response" rows="6" required>${routeData.response}</textarea>
        </label>
        <button type="submit">Save</button>
      </form>
    </section>
  `;
%>
<%- include('layout', { title, body }) %>
