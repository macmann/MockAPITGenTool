<% layout('layout', { base: '' }) %>
<h2>MCP Servers</h2>
<p class="muted">Configure MCP servers that expose selected mock endpoints as tools.</p>

<p>
  <a class="button" href="/admin/mcp/new?key=<%= encodeURIComponent(query.key||'') %>">+ New MCP Server</a>
  <a class="button secondary" href="/admin?key=<%= encodeURIComponent(query.key||'') %>">Back to endpoints</a>
</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Base URL</th>
      <th>Enabled</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% for (const s of servers) { %>
      <tr>
        <td><strong><%= s.name %></strong><br/><span class="muted"><%= s.description || '' %></span></td>
        <td><code><%= s.base_url || '' %></code></td>
        <td><%= s.is_enabled ? 'Yes' : 'No' %></td>
        <td class="right">
          <a class="button button-outline" href="/admin/mcp/<%= s.id %>?key=<%= encodeURIComponent(query.key||'') %>">Edit</a>
          <a class="button button-outline" href="/admin/mcp/<%= s.id %>/tools?key=<%= encodeURIComponent(query.key||'') %>">Tools</a>
        </td>
      </tr>
    <% } %>
  </tbody>
</table>
