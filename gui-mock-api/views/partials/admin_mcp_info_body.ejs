<h2>MCP connection details for <%= s.name %></h2>
<p class="muted">Share this information with trusted third parties so they can configure their MCP client.</p>

<section class="connection-card">
  <div class="config-grid">
    <div class="config-field">
      <span class="config-label">Type</span>
      <code class="config-value"><%= clientConfig.type %></code>
    </div>
    <div class="config-field config-field--wide">
      <span class="config-label">URL</span>
      <code class="config-value"><%= clientConfig.url %></code>
    </div>
    <div class="config-field">
      <span class="config-label">Timeout (ms)</span>
      <code class="config-value"><%= clientConfig.timeoutMs %></code>
    </div>
    <div class="config-field">
      <span class="config-label">SSE read timeout (ms)</span>
      <code class="config-value"><%= clientConfig.sseReadTimeoutMs %></code>
    </div>
  </div>

  <div class="config-field config-field--stacked">
    <span class="config-label">Headers</span>
    <% if (clientConfig.headers.length === 0) { %>
      <p class="muted">No authentication headers required.</p>
    <% } else { %>
      <ul class="config-headers">
        <% for (const h of clientConfig.headers) { %>
          <li><code><%= h.header %>: <%= h.value %></code></li>
        <% } %>
      </ul>
    <% } %>
  </div>

  <% if (baseUrlSource === 'derived') { %>
    <p class="muted" style="margin-top:0.5rem;">Tip: configure a base URL in the MCP server settings to avoid changes based on the current request.</p>
  <% } else if (!baseUrl && !mcpPublicUrl) { %>
    <div class="flash flash-error" style="margin-top:0.5rem;">No base URL configured yet. Local requests can use <code>/mcp</code>.</div>
  <% } %>
</section>

<section>
  <h3>Shareable JSON summary</h3>
  <p class="muted">Includes the minimum fields a client needs to connect.</p>
  <pre><code><%- JSON.stringify(infoPayload, null, 2) %></code></pre>
</section>

<section>
  <h3>Available tools</h3>
  <% if ((tools || []).length === 0) { %>
    <p class="muted">No MCP tools have been added yet. Add at least one tool to expose mock endpoints.</p>
  <% } else { %>
    <table>
      <thead>
        <tr>
          <th>Tool name</th>
          <th>HTTP method</th>
          <th>Endpoint path</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <% for (const t of tools) { %>
          <tr>
            <td><code><%= t.name %></code></td>
            <td><code><%= String(t.method || '').toUpperCase() %></code></td>
            <td><code><%= (t.path || '').replace(/:([A-Za-z0-9_]+)/g, '<$1>') %></code></td>
            <td><%= t.description || '' %></td>
          </tr>
        <% } %>
      </tbody>
    </table>
  <% } %>
</section>

<p style="margin-top:1.5rem;">
  <a class="button secondary" href="/admin/mcp?key=<%= encodeURIComponent(query?.key || '') %>">‚Üê Back to MCP servers</a>
  <% if (s.id) { %>
    <a class="button" href="/admin/mcp/<%= s.id %>/tools?key=<%= encodeURIComponent(query?.key || '') %>">Manage tools</a>
  <% } %>
</p>
